# DeepNetVisibility - å†…ç½‘èµ„äº§å¯è§†åŒ–ç³»ç»Ÿ

åŸºäº React Flow æ„å»ºçš„æ¸—é€æµ‹è¯•å†…ç½‘èµ„äº§ç®¡ç†å’Œå¯è§†åŒ–ç³»ç»Ÿï¼Œæ”¯æŒèŠ‚ç‚¹ç®¡ç†ã€æ ‡ç­¾ç³»ç»Ÿå’ŒJSONæ•°æ®å¯¼å…¥å¯¼å‡ºã€‚

## åŠŸèƒ½ç‰¹æ€§

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **èŠ‚ç‚¹ç±»å‹æ”¯æŒ**
  - ğŸŒ CIDRç½‘æ®µ (Network)
  - ğŸ–¥ï¸ æœåŠ¡å™¨ (Webã€Databaseã€Domain Controllerç­‰)
  - ğŸ’» ä¸ªäººè®¡ç®—æœº (Windowsã€Linuxç­‰)
  - âš™ï¸ ç½‘ç»œè®¾å¤‡ (Firewallã€Routerã€Switchç­‰)

- **çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿ**
  - æ“ä½œç³»ç»Ÿæ ‡ç­¾ (Windowsã€Linuxã€macOSç­‰)
  - åŸŸä¿¡æ¯æ ‡ç­¾ (Domain Controllerã€Domain Memberã€Workgroup)
  - å…³é”®æœåŠ¡æ ‡ç­¾ (Exchangeã€SQL Serverã€SharePointç­‰)
  - é£é™©çŠ¶æ€æ ‡ç­¾ (Compromisedã€Unpatchedã€Exposedã€Secured)
  - è‡ªå®šä¹‰æ ‡ç­¾æ”¯æŒ

- **æ•°æ®ç®¡ç†**
  - ğŸ“¥ ä»JSONå¯¼å…¥èµ„äº§æ•°æ®
  - ğŸ“¤ å¯¼å‡ºä¸ºJSONæ ¼å¼
  - èŠ‚ç‚¹å’Œå…³ç³»çš„å®æ—¶ç¼–è¾‘
  - æ‰¹é‡æ¸…é™¤åŠŸèƒ½

### ğŸ¨ ç”¨æˆ·ç•Œé¢

- äº¤äº’å¼æ‹“æ‰‘å›¾
  - æ‹–æ‹½èŠ‚ç‚¹
  - ç¼©æ”¾å’Œå¹³ç§»
  - å°åœ°å›¾é¢„è§ˆ
  - è‡ªåŠ¨å¸ƒå±€é€‚é…

- ä¾¿æ·çš„æ§åˆ¶é¢æ¿
  - å¿«é€Ÿæ·»åŠ èŠ‚ç‚¹
  - è§†å›¾è°ƒæ•´
  - æ•°æ®å¯¼å…¥å¯¼å‡º
  - èµ„äº§ç»Ÿè®¡ä¿¡æ¯

## å¿«é€Ÿå¼€å§‹

### å®‰è£…å’Œè¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://localhost:5173`

### ç”Ÿäº§æ„å»º

```bash
npm run build
npm run preview
```

## æ•°æ®æ ¼å¼

### JSON æ•°æ®ç»“æ„

åº”ç”¨ç¨‹åºä½¿ç”¨æ ‡å‡†çš„JSONæ ¼å¼å­˜å‚¨èµ„äº§å’Œå…³ç³»æ•°æ®ï¼š

```json
{
  "version": "1.0",
  "timestamp": "2026-02-03T00:00:00.000Z",
  "nodes": [
    {
      "id": "dc-1",
      "type": "server",
      "position": { "x": -200, "y": 150 },
      "data": {
        "label": "DC01",
        "description": "Domain Controller",
        "ip": "192.168.1.10",
        "subType": "dc",
        "tags": {
          "os": ["windows"],
          "domain": ["domain_controller"],
          "risk": ["secured"]
        },
        "metadata": {
          "hostname": "DC01.corp.com",
          "osVersion": "Windows Server 2022"
        }
      }
    }
  ],
  "edges": [
    {
      "id": "edge-cidr-1-dc-1",
      "source": "cidr-1",
      "target": "dc-1",
      "data": {
        "label": "contains",
        "type": "contains"
      }
    }
  ]
}
```

## èŠ‚ç‚¹ç±»å‹å’Œå­ç±»å‹

### Server (æœåŠ¡å™¨)

- `web` - WebæœåŠ¡å™¨
- `database` - æ•°æ®åº“æœåŠ¡å™¨
- `dc` - åŸŸæ§åˆ¶å™¨
- `file` - æ–‡ä»¶æœåŠ¡å™¨
- `mail` - é‚®ä»¶æœåŠ¡å™¨
- `other` - å…¶ä»–

### Network Device (ç½‘ç»œè®¾å¤‡)

- `router` - è·¯ç”±å™¨
- `switch` - äº¤æ¢æœº
- `firewall` - é˜²ç«å¢™
- `ids_ips` - IDS/IPS
- `waf` - WAF
- `other` - å…¶ä»–

### Operating System (æ“ä½œç³»ç»Ÿ)

- `windows` - Windows
- `linux` - Linux
- `macos` - macOS
- `cisco_ios` - Cisco IOS
- `other` - å…¶ä»–

## ä½¿ç”¨æŒ‡å—

### æ·»åŠ èŠ‚ç‚¹

1. ç‚¹å‡»å·¦ä¸‹è§’ **"+ Add Node"** æŒ‰é’®
2. é€‰æ‹©èŠ‚ç‚¹ç±»å‹ï¼ˆCIDRã€Serverã€PCæˆ–Deviceï¼‰
3. é€‰æ‹©å­ç±»å‹ï¼ˆå¦‚é€‚ç”¨ï¼‰
4. è¾“å…¥æ ‡ç­¾å’ŒIPåœ°å€
5. ç‚¹å‡» **Add** ç¡®è®¤

### æ·»åŠ å…³ç³»ï¼ˆè¾¹ï¼‰

åœ¨React Flowä¸­ï¼Œè¿æ¥ä¸¤ä¸ªèŠ‚ç‚¹çš„æ–¹å¼ï¼š

- ä»ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸‹æ–¹handleæ‹–æ‹½åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹çš„ä¸Šæ–¹handle

### å¯¼å‡ºæ•°æ®

1. ç‚¹å‡»å³ä¸Šè§’é¢æ¿çš„ **"ğŸ“¥ Export to JSON"** æŒ‰é’®
2. ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸‹è½½åŒ…å«å½“å‰æ‰€æœ‰èŠ‚ç‚¹å’Œå…³ç³»çš„JSONæ–‡ä»¶
3. æ–‡ä»¶åæ ¼å¼ï¼š`asset-map-YYYY-MM-DD.json`

### å¯¼å…¥æ•°æ®

1. ç‚¹å‡»å³ä¸Šè§’é¢æ¿çš„ **"ğŸ“¤ Import from JSON"** æŒ‰é’®
2. é€‰æ‹©åˆæ³•çš„JSONæ•°æ®æ–‡ä»¶
3. å¯¼å…¥æˆåŠŸåä¼šæ˜¾ç¤ºç¡®è®¤ä¿¡æ¯

### æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯

å³ä¸Šè§’çš„å¯¼å…¥å¯¼å‡ºé¢æ¿å®æ—¶æ˜¾ç¤ºï¼š

- èŠ‚ç‚¹æ€»æ•°
- å…³ç³»æ€»æ•°
- å„ç±»å‹èŠ‚ç‚¹ç»Ÿè®¡

## é¡¹ç›®ç»“æ„

```plaintext
src/
â”œâ”€â”€ components/          # Reactç»„ä»¶
â”‚   â”œâ”€â”€ nodes/          # è‡ªå®šä¹‰èŠ‚ç‚¹ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ CIDRNode.jsx
â”‚   â”‚   â”œâ”€â”€ ServerNode.jsx
â”‚   â”‚   â”œâ”€â”€ PCNode.jsx
â”‚   â”‚   â”œâ”€â”€ DeviceNode.jsx
â”‚   â”‚   â””â”€â”€ NodeStyles.css
â”‚   â”œâ”€â”€ FlowCanvas.jsx   # ä¸»ç”»å¸ƒç»„ä»¶
â”‚   â”œâ”€â”€ ImportExport.jsx # å¯¼å…¥å¯¼å‡ºé¢æ¿
â”‚   â”œâ”€â”€ ControlPanel.jsx # æ§åˆ¶é¢æ¿
â”‚   â””â”€â”€ *.css            # ç»„ä»¶æ ·å¼
â”œâ”€â”€ store/
â”‚   â””â”€â”€ useFlowStore.js  # ZustandçŠ¶æ€ç®¡ç†
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.js         # ç±»å‹å®šä¹‰å’Œå¸¸é‡
â”œâ”€â”€ data/
â”‚   â””â”€â”€ sampleData.json  # ç¤ºä¾‹æ•°æ®
â”œâ”€â”€ App.jsx              # ä¸»åº”ç”¨ç¨‹åº
â””â”€â”€ index.css            # å…¨å±€æ ·å¼
```

## æŠ€æœ¯æ ˆ

- **React 18** - UIæ¡†æ¶
- **Vite** - æ„å»ºå·¥å…·å’Œå¼€å‘æœåŠ¡å™¨
- **React Flow** - å›¾å¯è§†åŒ–åº“
- **Zustand** - çŠ¶æ€ç®¡ç†
- **CSS** - æ ·å¼

## å¯¹æ¸—é€æµ‹è¯•çš„é€‚ç”¨åœºæ™¯

### âœ“ æ¨èä½¿ç”¨åœºæ™¯

- ç»è¿‡æˆæƒçš„å†…ç½‘æ¸—é€æµ‹è¯•
- èµ„äº§æ¢æµ‹å’Œæ•´ç†
- æ‹“æ‰‘å…³ç³»åˆ†æ
- é£é™©è¯„ä¼°å’Œæ ‡è®°
- æ¸—é€è·¯å¾„è§„åˆ’
- æµ‹è¯•æŠ¥å‘Šçš„å¯è§†åŒ–å±•ç¤º

### æ•°æ®å®‰å…¨æç¤º

- âš ï¸ JSONæ•°æ®ä»…å­˜å‚¨åœ¨æœ¬åœ°æµè§ˆå™¨
- å¯¼å‡ºå‰ç¡®ä¿æ–‡ä»¶å®‰å…¨å­˜å‚¨
- ä¸è¦åŒ…å«çœŸå®çš„å¯†ç æˆ–å‡­æ®ä¿¡æ¯
- ä½¿ç”¨å®‰å…¨çš„é€šé“ä¼ è¾“æ•°æ®
- è€ƒè™‘å¯¹æ•æ„Ÿä¿¡æ¯è¿›è¡ŒåŠ å¯†

## ç¤ºä¾‹åœºæ™¯

å‡è®¾ä½ åœ¨ä¸€ä¸ªWindowsåŸŸç¯å¢ƒä¸­è¿›è¡Œæ¸—é€æµ‹è¯•ï¼š

```json
{
  "nodes": [
    { "id": "cidr-1", "type": "cidr", "data": { "label": "10.0.0.0/24" } },
    { "id": "dc-1", "type": "server", "data": { "label": "DC01", "subType": "dc", "tags": {"os": ["windows"], "domain": ["domain_controller"]} } },
    { "id": "ex-1", "type": "server", "data": { "label": "EX01", "subType": "mail", "tags": {"os": ["windows"], "service": ["exchange"], "risk": ["exposed"]} } },
    { "id": "db-1", "type": "server", "data": { "label": "DB01", "subType": "database", "tags": {"os": ["windows"], "service": ["sqlserver"], "risk": ["unpatched"]} } },
    { "id": "pc-1", "type": "pc", "data": { "label": "WORK-01", "tags": {"os": ["windows"], "domain": ["domain_member"]} } }
  ],
  "edges": [
    { "source": "cidr-1", "target": "dc-1", "data": { "type": "contains" } },
    { "source": "dc-1", "target": "pc-1", "data": { "type": "auth" } },
    { "source": "pc-1", "target": "ex-1", "data": { "type": "connects" } },
    { "source": "ex-1", "target": "db-1", "data": { "type": "depends_on" } }
  ]
}
```

## å¸¸è§é—®é¢˜

**Q: æ•°æ®ä¼šè¢«ä¿å­˜å—ï¼Ÿ**
A: æ•°æ®ä»…å­˜å‚¨åœ¨å½“å‰æµè§ˆå™¨ä¼šè¯ä¸­ã€‚åˆ·æ–°é¡µé¢ä¼šä¸¢å¤±æ•°æ®ï¼Œéœ€è¦é€šè¿‡å¯¼å‡ºJSONæ¥æŒä¹…åŒ–ã€‚

**Q: å¯ä»¥ç¼–è¾‘å·²æœ‰èŠ‚ç‚¹å—ï¼Ÿ**
A: ç›®å‰ç‰ˆæœ¬æ”¯æŒæ‹–æ‹½ç§»åŠ¨èŠ‚ç‚¹ã€‚ç›´æ¥ç¼–è¾‘åŠŸèƒ½åœ¨è§„åˆ’ä¸­ã€‚

**Q: æœ€å¤šæ”¯æŒå¤šå°‘ä¸ªèŠ‚ç‚¹ï¼Ÿ**
A: React Flowæ€§èƒ½è¶³ä»¥æ”¯æŒæ•°ç™¾ä¸ªèŠ‚ç‚¹ï¼Œå…·ä½“å–å†³äºæµè§ˆå™¨æ€§èƒ½ã€‚

**Q: æ”¯æŒä»€ä¹ˆæµè§ˆå™¨ï¼Ÿ**
A: ç°ä»£æµè§ˆå™¨ï¼ˆChromeã€Firefoxã€Safariã€Edgeï¼‰

## å¼€å‘å’Œè´¡çŒ®

### æœ¬åœ°å¼€å‘

```bash
npm run dev      # å¼€å‘æ¨¡å¼
npm run build    # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run preview  # é¢„è§ˆç”Ÿäº§æ„å»º
```

### æ‰©å±•èŠ‚ç‚¹ç±»å‹

ç¼–è¾‘ `src/types/index.js` æ·»åŠ æ–°çš„èŠ‚ç‚¹ç±»å‹ï¼Œç„¶ååœ¨ `src/components/nodes/` ä¸­åˆ›å»ºå¯¹åº”çš„ç»„ä»¶ã€‚

## è®¸å¯è¯

è¯¥é¡¹ç›®ä»…ç”¨äºç»è¿‡æˆæƒçš„å®‰å…¨æµ‹è¯•å’Œç ”ç©¶ã€‚

---

**âš ï¸ è´£ä»»å£°æ˜**: æœ¬å·¥å…·ä»…ç”¨äºç»è¿‡æˆæƒçš„å®‰å…¨æµ‹è¯•å’Œé˜²å¾¡æ€§ç”¨é€”ã€‚ä»»ä½•æœªç»æˆæƒçš„è®¿é—®ã€æµ‹è¯•æˆ–ä¿®æ”¹ä»–äººç³»ç»Ÿå‡å±è¿æ³•è¡Œä¸ºã€‚ä½¿ç”¨è€…éœ€è‡ªè¡Œæ‰¿æ‹…æ‰€æœ‰æ³•å¾‹è´£ä»»ã€‚
